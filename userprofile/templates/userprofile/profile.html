{% extends "base.html" %}
{% load static %}
{% load custom_filters %}

{% block title %}User Profile | DnD Character Creator{% endblock %}

{% block content %}
<div class="container">
    <div class="row d-flex flex-column flex-md-row py-4">
            <div class="d-flex flex-column justify-content-center align-items-center col-12 col-md-4 col-lg-3">
                <img class="profile-image mb-4 mb-md-0 me-md-4" src="{{ user.userprofile.profile_image_url }}" alt="Profile Picture">
                {% if is_own_profile %}
                    <button class="btn btn-outline-primary mt-2">Upload image</button>
                {% endif %}
            </div>
            <div class="d-flex flex-column justify-content-center align-items-center align-items-md-start col-12 col-md-8 col-lg-9">
                <h1>{{ user.username }}</h1>
                <div id="bio-container">
                    {% if user.userprofile.bio %}
                        <p id="bio-text">{{ user.userprofile.bio }}</p>
                    {% endif %}
                    {% if not user.userprofile.bio %}
                        <p>No bio.</p>
                    {% endif %}
                    {% if is_own_profile %}
                        <button id="edit-bio-button" class="btn btn-outline-primary">Edit bio</button>
                    {% endif %}
                </div>
                
                {% if is_own_profile %}
                    <form class="d-none align-self-stretch " id="edit-bio-form" action="{% url 'edit_profile_bio' user.id %}" method="POST">
                        {% csrf_token %}
                        <textarea class="form-control" name="bio" id="bio-textarea" class="form-control" rows="3">{{ user.userprofile.bio }}</textarea>
                        <button type="submit" class="btn btn-primary mt-2">Save</button>
                    </form>
                {% endif %}

            </div>
        </div>

<p>This is the profile for {{ user.username }}</p>
{% if is_own_profile %}
    <p>This is your profile!</p>
{% endif %}
{% if not is_own_profile %}
    <p>This is not your profile!</p>
{% endif %}

{% if created_characters %}
    <p>This user has created the following characters:</p>
    {% for character in created_characters %}
        <p>{{ character.name }}</p>
    {% endfor %}
{% endif %}
    
    </div>
</div>

{% endblock %}



{% block extra_body %}
{%  endblock%}


{% block extra_scripts %}
<script src="{% static 'js/userProfile.js' %}"></script>
{% endblock %}
